<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>YouTube Quality Control</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app">
        <!-- Header -->
        <header>
            <div class="brand">
                <svg class="yt-logo" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
                </svg>
                <span>Quality Control <small id="appVersion" style="opacity:0.5; font-size:10px;"></small></span>
            </div>
            <div class="status-indicator" id="statusMessage" title="Connection Status">
                <div class="status-dot"></div>
            </div>
        </header>

        <!-- Main Card -->
        <main>
            <div class="quality-card">
                <div class="current-quality-display">
                    <span class="label">Current</span>
                    <span id="currentQuality" class="value">--</span>
                </div>

                <div class="slider-wrapper">
                    <input type="range" id="qualitySlider" min="0" max="100" value="50">
                    <div id="quality-markers" class="slider-markers"></div>
                    <div id="slider-tooltip" class="slider-tooltip"></div>
                    <div class="track-fill"></div>
                </div>

                <div class="presets">
                    <label class="chip">
                        <input type="radio" name="quality-preset" id="lowestQuality">
                        <span class="chip-content">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                                <path d="M11 4h2v12l5.5-5.5 1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5 11 16V4z" />
                            </svg>
                            <span>Lowest</span>
                        </span>
                    </label>
                    <label class="chip">
                        <input type="radio" name="quality-preset" id="highestQuality">
                        <span class="chip-content">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                                <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z" />
                            </svg>
                            <span>Highest</span>
                        </span>
                    </label>
                </div>
            </div>

            <!-- Shortcuts List (Compact) -->
            <div class="shortcuts-list">
                <div class="shortcut-row">
                    <span class="sc-label">Quality Down</span>
                    <div class="keys" id="keys-quality-down"></div>
                </div>
                <div class="shortcut-row">
                    <span class="sc-label">Quality Up</span>
                    <div class="keys" id="keys-quality-up"></div>
                </div>
                <div class="shortcut-row">
                    <span class="sc-label">Lowest Quality</span>
                    <div class="keys" id="keys-quality-min"></div>
                </div>
                <div class="shortcut-row">
                    <span class="sc-label">Highest Quality</span>
                    <div class="keys" id="keys-quality-max"></div>
                </div>

                <div style="margin-top: 12px; text-align: center;">
                    <button id="openSettings" class="settings-btn">
                        Customize Shortcuts â†—
                    </button>
                </div>

                <!-- Windows hint, hidden on Mac via JS logic usually, but here handled by CSS class toggling if needed or simple text -->
                <div id="windowsHint" style="display:none; font-size: 10px; color: #666; margin-top: 4px;">
                    (Use Ctrl instead of Cmd)
                </div>
            </div>

            <!-- Debug Logs Section -->
            <div class="debug-section" style="margin-top: 15px; border-top: 1px solid #eee; padding-top: 10px;">
                <details>
                    <summary style="cursor: pointer; font-size: 12px; color: #666; user-select: none;">Debug Logs
                    </summary>
                    <div style="margin-top: 8px;">
                        <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                            <button id="refreshLogs" style="font-size: 10px; padding: 2px 6px;">Refresh</button>
                            <button id="clearLogs" style="font-size: 10px; padding: 2px 6px;">Clear</button>
                        </div>
                        <div id="logContainer" style="
                            font-family: monospace;
                            font-size: 10px;
                            background: #f5f5f5;
                            padding: 8px;
                            border-radius: 4px;
                            max-height: 150px;
                            overflow-y: auto;
                            white-space: pre-wrap;
                            word-break: break-all;
                        ">Loading logs...</div>
                    </div>
                </details>
            </div>
        </main>

        <!-- Footer -->
        <footer>
            <a href="https://www.buymeacoffee.com/vitamaxdh" target="_blank" id="coffeeBtn" class="bmc-button">
                <span class="bmc-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M20.216 6.415l-.132-.666c-.119-.596-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.098L4.326 4.3c-.63 0-1.12.58-1.005 1.155L5.756 16.9c.119.596.5 1.163 1.11 1.379.197.069.42.098.57.098h.047l5.365.027v.033l.915-.053 5.365-.027c.63 0 1.12-.58 1.005-1.155l-.575-2.879c1.608-.147 2.766-1.587 2.584-3.213-.197-1.748-1.582-3.08-3.003-3.213l-.536-2.684.004.004zM4.697 5.48h13.14l.206 1.03H4.492l.205-1.03zm12.33 11.237c-.105.526-.418 1.026-.957 1.216l-9.135.045c-.538-.19-.942-.69-1.047-1.216L4.72 6.697l13.473-.068-1.165 10.088zm4.496-5.466c.158 1.411-.849 2.661-2.247 2.788L18.4 14.15l.408-2.616H18.8c1.398-.127 2.56-1.376 2.4-2.787l.21-1.066h.115c1.398.127 2.56 1.377 2.4 2.788l-.209 1.065h-.005z" />
                    </svg>
                </span>
                <span>Buy me a coffee</span>
            </a>
        </footer>
    </div>
    <script src="check_os.js"></script>
    <script src="popup.js"></script>
</body>

</html>