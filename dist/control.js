"use strict";(()=>{var c="YOUTUBE_QUALITY_EXTENSION_INTERNAL";window.addEventListener("message",a=>{if(a.source!==window||a.data?.source!==c)return;let t=a.data;switch(t.type){case"GET_QUALITY_INFO":t.requestId&&g(t.requestId);break;case"CHANGE_QUALITY":t.payload&&typeof t.payload.increase=="boolean"&&p(t.payload.increase);break;case"SET_SPECIFIC_QUALITY":t.payload&&t.payload.quality&&T(t.payload.quality);break;case"SET_EXTREME_QUALITY":t.payload&&typeof t.payload.highest=="boolean"&&Q(t.payload.highest);break}});var b=globalThis.trustedTypes?.createPolicy("youtube-quality-policy",{createHTML:a=>a})||{createHTML:a=>a},s=null,n=Object.freeze({tiny:{label:"144p"},small:{label:"240p"},medium:{label:"360p"},large:{label:"480p"},hd720:{label:"720p"},hd1080:{label:"1080p",tag:"HD"},hd1440:{label:"1440p",tag:"HD+"},hd2160:{label:"2160p",tag:"4K"},hd2880:{label:"2880p",tag:"5K"},highres:{label:"4320p",tag:"8K"}}),d=700;function g(a){let t=document.getElementById("movie_player");if(!t?.getAvailableQualityLevels){let e={source:c,type:"QUALITY_INFO_RESPONSE",requestId:a,payload:{currentQuality:{id:"",label:""},availableQualities:[],success:!1,error:"Player not found"}};window.postMessage(e,"*");return}try{let e=t.getPlaybackQuality(),o=t.getAvailableQualityLevels(),i={id:e,label:e};n[e]&&(i={id:e,label:n[e].label,...n[e].tag&&{tag:n[e].tag}});let l=o.map(r=>n[r]?{id:r,label:n[r].label,...n[r].tag&&{tag:n[r].tag}}:{id:r,label:r}),u={source:c,type:"QUALITY_INFO_RESPONSE",requestId:a,payload:{currentQuality:i,availableQualities:l,success:!0}};window.postMessage(u,"*")}catch(e){console.error("YouTube Quality Shortcut: Error getting quality info",e);let o={source:c,type:"QUALITY_INFO_RESPONSE",requestId:a,payload:{currentQuality:{id:"",label:""},availableQualities:[],success:!1,error:e.message}};window.postMessage(o,"*")}}function p(a){let t=document.getElementById("movie_player");if(!t?.getAvailableQualityLevels){console.error("YouTube Quality Shortcut: Player not found or API not available");return}try{let e=[...t.getAvailableQualityLevels()],o=e.indexOf("auto");if(o!==-1&&e.splice(o,1),e.length===0){console.warn("YouTube Quality Shortcut: No quality levels available");return}let i=t.getPlaybackQuality(),l=e.indexOf(i);l===-1&&(l=0);let u=l;a&&l>0?u=l-1:!a&&l<e.length-1&&(u=l+1);let r=e[u];r!==i&&t.setPlaybackQualityRange(r),y(r)}catch(e){console.error("YouTube Quality Shortcut: Error changing quality",e)}}function y(a){try{let t=document.querySelector(".ytp-bezel-text-wrapper"),e=document.querySelector(".ytp-bezel-text"),o=t?.parentNode,i=document.querySelector(".ytp-bezel-icon");if(!e||!o||!i)return;i.style.display="none",o.style.display="block",o.classList.remove("ytp-bezel-text-hide");let l=n[a],u=l?.label||a;l?.tag&&(u+=` <span style="background-color: red; color: white; padding: 2px 4px; border-radius: 4px; font-size: small;">${l.tag}</span>`),e.innerHTML=b.createHTML(u),s&&(clearTimeout(s),s=null),s=window.setTimeout(()=>{o.style.display="none",i.style.display="block",s=null},d)}catch(t){console.error("YouTube Quality Shortcut: Error showing indicator",t)}}function Q(a){let t=document.getElementById("movie_player");if(!t?.getAvailableQualityLevels){console.error("YouTube Quality Shortcut: Player not found or API not available");return}try{let e=[...t.getAvailableQualityLevels()],o=e.indexOf("auto");if(o!==-1&&e.splice(o,1),e.length===0){console.warn("YouTube Quality Shortcut: No quality levels available");return}let i=t.getPlaybackQuality(),l=a?e[0]:e[e.length-1];l!==i&&t.setPlaybackQualityRange(l),y(l)}catch(e){console.error("YouTube Quality Shortcut: Error setting extreme quality",e)}}function T(a){let t=document.getElementById("movie_player");if(!t?.getAvailableQualityLevels){console.error("YouTube Quality Shortcut: Player not found or API not available");return}try{if(!t.getAvailableQualityLevels().includes(a)){console.warn(`YouTube Quality Shortcut: Requested quality ${a} not available`);return}let o=t.getPlaybackQuality();a!==o&&t.setPlaybackQualityRange(a),y(a)}catch(e){console.error("YouTube Quality Shortcut: Error setting specific quality",e)}}})();
