"use strict";(()=>{var a=Object.freeze({active:"./images/icon_active_32.png",inactive:"./images/icon_32.png"}),i=["youtube.com/watch","www.youtube.com/watch"],c="YouTube Quality Shortcut";chrome.commands.onCommand.addListener(o=>{try{chrome.tabs.query({active:!0,currentWindow:!0},e=>{if(!e||!e.length){console.debug(`${c}: No active tabs found`);return}let r=e[0];if(s(r.url)){let t={command:o,...r.id&&{tabId:r.id}};chrome.tabs.sendMessage(r.id,t,()=>{let n=chrome.runtime.lastError;n&&console.debug(`${c}: ${n.message}`)})}})}catch(e){console.error(`${c}: Command handler error`,e)}});chrome.tabs.onUpdated.addListener((o,e,r)=>{try{if(!r.url)return;let t=s(r.url)?a.active:a.inactive;chrome.action.setIcon({path:t,tabId:o}).catch(n=>{console.debug(`${c}: Icon update error`,n)})}catch(t){console.error(`${c}: Tab update handler error`,t)}});function s(o){return!o||typeof o!="string"?!1:i.some(e=>o.includes(e))}})();
